<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>功能测试 - shinichikubo.top</title>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 20px; border: 1px solid #ccc; border-radius: 8px; }
        .test-section h3 { color: #2563eb; }
        button { padding: 10px 20px; margin: 5px; background: #2563eb; color: white; border: none; border-radius: 4px; cursor: pointer; }
        button:hover { background: #1d4ed8; }
        textarea, input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ccc; border-radius: 4px; }
        .result { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>shinichikubo.top 功能测试页面</h1>
    
    <div class="test-section">
        <h3>JSON格式化工具测试</h3>
        <textarea id="json-test-input" rows="4" placeholder='{"name":"test","value":123,"nested":{"key":"value"}}'></textarea>
        <br>
        <button onclick="testJSONFormat()">测试格式化</button>
        <button onclick="testJSONMinify()">测试压缩</button>
        <div id="json-result" class="result"></div>
    </div>

    <div class="test-section">
        <h3>Base64工具测试</h3>
        <textarea id="base64-test-input" rows="4" placeholder="输入要编码的文本"></textarea>
        <br>
        <button onclick="testBase64Encode()">测试编码</button>
        <button onclick="testBase64Decode()">测试解码</button>
        <div id="base64-result" class="result"></div>
    </div>

    <div class="test-section">
        <h3>二维码生成器测试</h3>
        <input type="text" id="qr-test-input" placeholder="输入要生成二维码的文本" value="https://shinichikubo.top">
        <br>
        <button onclick="testQRGenerate()">生成二维码</button>
        <div id="qr-result" class="result"></div>
    </div>

    <script>
        // JSON工具测试
        function testJSONFormat() {
            try {
                const input = document.getElementById('json-test-input').value;
                const parsed = JSON.parse(input);
                const formatted = JSON.stringify(parsed, null, 2);
                document.getElementById('json-result').innerHTML = '<strong>格式化成功:</strong><br><pre>' + formatted + '</pre>';
            } catch (error) {
                document.getElementById('json-result').innerHTML = '<strong>错误:</strong> ' + error.message;
            }
        }

        function testJSONMinify() {
            try {
                const input = document.getElementById('json-test-input').value;
                const parsed = JSON.parse(input);
                const minified = JSON.stringify(parsed);
                document.getElementById('json-result').innerHTML = '<strong>压缩成功:</strong><br><pre>' + minified + '</pre>';
            } catch (error) {
                document.getElementById('json-result').innerHTML = '<strong>错误:</strong> ' + error.message;
            }
        }

        // Base64工具测试
        function testBase64Encode() {
            try {
                const input = document.getElementById('base64-test-input').value;
                const encoded = btoa(unescape(encodeURIComponent(input)));
                document.getElementById('base64-result').innerHTML = '<strong>编码成功:</strong><br>' + encoded;
            } catch (error) {
                document.getElementById('base64-result').innerHTML = '<strong>错误:</strong> ' + error.message;
            }
        }

        function testBase64Decode() {
            try {
                const input = document.getElementById('base64-test-input').value;
                const decoded = decodeURIComponent(escape(atob(input)));
                document.getElementById('base64-result').innerHTML = '<strong>解码成功:</strong><br>' + decoded;
            } catch (error) {
                document.getElementById('base64-result').innerHTML = '<strong>错误:</strong> ' + error.message;
            }
        }

        // 二维码工具测试
        function testQRGenerate() {
            try {
                const input = document.getElementById('qr-test-input').value;
                const canvas = document.createElement('canvas');
                QRCode.toCanvas(canvas, input, { width: 200, margin: 2 }, function (error) {
                    if (error) {
                        document.getElementById('qr-result').innerHTML = '<strong>错误:</strong> ' + error.message;
                    } else {
                        document.getElementById('qr-result').innerHTML = '<strong>二维码生成成功:</strong><br>';
                        document.getElementById('qr-result').appendChild(canvas);
                    }
                });
            } catch (error) {
                document.getElementById('qr-result').innerHTML = '<strong>错误:</strong> ' + error.message;
            }
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('测试页面加载完成');
            
            // 设置测试数据
                         document.getElementById('json-test-input').value = '{"name":"shinichikubo.top","description":"免费在线工具集合","features":["JSON格式化","Base64工具","二维码生成器"],"version":"1.0.0"}';
                         document.getElementById('base64-test-input').value = 'Hello, shinichikubo.top! 你好，免费工具！';
        });
    </script>
</body>
</html>
